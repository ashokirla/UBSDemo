# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml
trigger: none

resources:
  pipelines:
    - pipeline: MyAppCI
      source: ashokirla.UBSDemo (1)
      branch: master
      trigger: 
       branches:
       - master

      
  builds:
  - build: javaAppBuild
    type: Jenkins
    connection: Spaceworkz
    source: UBSTest
      

stages:
- stage: Build 
  displayName: Build
  jobs:
  - job: myBuild1
    pool: Hosted VS2017
    steps:
    - download: MyAppCI
    - script: set
  #  - downloadBuild: javaAppBuild
    - powershell: |
                  ls $(Pipeline.Workspace)/
    # - task: PublishPipelineArtifact@1
    #   inputs:
    #     targetPath: '$(Pipeline.Workspace)'
    #     artifact: 'myArt1'
    # - task: DownloadGitHubRelease@0
    #   inputs:
    #     connection: 'ashokirla'
    #     userRepository: 'ashokirla/Fabrikam'
    #     defaultVersionType: 'latest'
    #     downloadPath: '$(System.ArtifactsDirectory)'

#      

- stage: Deploy
  displayName: Deploy stage
#  dependsOn: Build
  jobs:  
  - deployment: Deploy
    displayName: Application deployment
    pool: Hosted VS2017
    environment: Environment01
    strategy:
        runOnce:
          deploy:
            steps:
              - powershell: |
                  ls $(Pipeline.Workspace)/
              # - task: DownloadGitHubRelease@0
              #   inputs:
              #     connection: 'ashokirla'
              #     userRepository: 'ashokirla/Fabrikam'
              #     defaultVersionType: 'latest'
              #     downloadPath: '$(System.ArtifactsDirectory)'





